{"version":3,"file":"settings.service.js","sourceRoot":"","sources":["../../../../../../../packages/theme/src/services/settings/settings.service.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;;;AAG3C,IAAM,UAAU,GAAG,QAAQ,CAAC;;AAC5B,IAAM,QAAQ,GAAG,MAAM,CAAC;;AACxB,IAAM,OAAO,GAAG,KAAK,CAAC;;;oBAIA,IAAI;qBACF,IAAI;uBACA,IAAI;;;;;;IAEtB,6BAAG;;;;cAAC,GAAW;QACrB,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,IAAI,IAAI,CAAC;;;;;;;IAGzD,6BAAG;;;;;cAAC,GAAW,EAAE,KAAU;QACjC,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;;IAGnD,sBAAI,mCAAM;;;;QAAV;YACE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,mBAClB;oBACN,KAAK,EAAE,IAAI;oBACX,SAAS,EAAE,KAAK;oBAChB,KAAK,EAAE,KAAK;oBACZ,IAAI,EAAE,IAAI;iBACX,GACD,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CACrB,CAAC;gBACF,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;aACpC;YACD,OAAO,IAAI,CAAC,OAAO,CAAC;SACrB;;;OAAA;IAED,sBAAI,gCAAG;;;;QAAP;YACE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACd,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,MAAM,mBAClB;oBACH,IAAI,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;iBAC/B,GACD,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAClB,CAAC;gBACF,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;aAC9B;YACD,OAAO,IAAI,CAAC,IAAI,CAAC;SAClB;;;OAAA;IAED,sBAAI,iCAAI;;;;QAAR;YACE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACf,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,mBAAO,EAAE,GAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACzD,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;aAChC;YACD,OAAO,IAAI,CAAC,KAAK,CAAC;SACnB;;;OAAA;;;;;;IAED,mCAAS;;;;;IAAT,UAAU,IAAY,EAAE,KAAU;QAChC,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,WAAW,EAAE;YAC5C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YACnC,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;KACd;;;;;IAED,gCAAM;;;;IAAN,UAAO,GAAQ;QACb,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;KACxB;;;;;IAED,iCAAO;;;;IAAP,UAAQ,GAAS;QACf,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QACjB,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;KACzB;;gBApEF,UAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;0BAPlC;;SAQa,eAAe","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { App, Layout, User } from './interface';\r\n\r\nconst LAYOUT_KEY = 'layout';\r\nconst USER_KEY = 'user';\r\nconst APP_KEY = 'app';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class SettingsService {\r\n  private _app: App = null;\r\n  private _user: User = null;\r\n  private _layout: Layout = null;\r\n\r\n  private get(key: string) {\r\n    return JSON.parse(localStorage.getItem(key) || 'null') || null;\r\n  }\r\n\r\n  private set(key: string, value: any) {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  }\r\n\r\n  get layout(): Layout {\r\n    if (!this._layout) {\r\n      this._layout = Object.assign(\r\n        <Layout>{\r\n          fixed: true,\r\n          collapsed: false,\r\n          boxed: false,\r\n          lang: null,\r\n        },\r\n        this.get(LAYOUT_KEY),\r\n      );\r\n      this.set(LAYOUT_KEY, this._layout);\r\n    }\r\n    return this._layout;\r\n  }\r\n\r\n  get app(): App {\r\n    if (!this._app) {\r\n      this._app = Object.assign(\r\n        <App>{\r\n          year: new Date().getFullYear(),\r\n        },\r\n        this.get(APP_KEY),\r\n      );\r\n      this.set(APP_KEY, this._app);\r\n    }\r\n    return this._app;\r\n  }\r\n\r\n  get user(): User {\r\n    if (!this._user) {\r\n      this._user = Object.assign(<User>{}, this.get(USER_KEY));\r\n      this.set(USER_KEY, this._user);\r\n    }\r\n    return this._user;\r\n  }\r\n\r\n  setLayout(name: string, value: any): boolean {\r\n    if (typeof this.layout[name] !== 'undefined') {\r\n      this.layout[name] = value;\r\n      this.set(LAYOUT_KEY, this._layout);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  setApp(val: App) {\r\n    this._app = val;\r\n    this.set(APP_KEY, val);\r\n  }\r\n\r\n  setUser(val: User) {\r\n    this._user = val;\r\n    this.set(USER_KEY, val);\r\n  }\r\n}\r\n"]}